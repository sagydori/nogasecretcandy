<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>🎅 סנטה הסודי</title>
  <meta name="description" content="פתרו חידות מתמטיות כדי לגלות את הרמז הסודי!" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700;800&family=Fredoka+One&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- Persistent Secret Code Trigger -->
  <button id="persistent-code-btn" class="btn-lock-toggle" onclick="toggleCodeModal()" title="כניסה עם קוד סודי">
    🔒
  </button>

  <!-- Snowflakes -->
  <div class="snowflakes" aria-hidden="true">
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
  </div>

  <!-- Verification Screen -->
  <div id="verification-screen" class="screen active">
    <div class="card verification-card">
      <div class="verification-header">
        <h1>Verify you are Noga</h1>
        <p class="verification-subtitle">Click on all your family members</p>
      </div>
      <div id="captcha-grid" class="captcha-grid">
        <!-- Images injected by JS -->
      </div>
      <button id="verify-captcha-btn" class="btn btn-primary" onclick="checkCaptcha()">
        <span>Verify</span>
      </button>
      <p id="captcha-error" class="captcha-error hidden">Not quite right, try again!</p>
    </div>
  </div>

  <!-- Welcome Screen -->
  <div id="welcome-screen" class="screen">
    <div class="card welcome-card">
      <div class="santa-hat">🎅</div>
      <h1>סנטה הסודי</h1>
      <p class="welcome-text">
        !יאלה בואו נתחיל<br />
        יש לך רק 2 ניסיונות לכל שאלה לפני שהיא מתחלפת! ⚠️
      </p>
      <button id="start-btn" class="btn btn-primary" onclick="startGame()">
        <span>🎄 !יאללה לדרך 🎄</span>
      </button>
    </div>
  </div>

  <!-- Puzzle Screen -->
  <div id="puzzle-screen" class="screen">
    <div class="progress-container">
      <div class="progress-header">
        <span id="puzzle-category" class="category-badge">מתמטיקה</span>
        <span id="progress-text" class="progress-text">1 / 9</span>
      </div>
      <div class="progress-bar">
        <div id="progress-fill" class="progress-fill"></div>
      </div>
    </div>

    <div class="letters-display" id="letters-display"></div>

    <div class="card puzzle-card" id="puzzle-card">
      <div class="puzzle-header">
        <span id="puzzle-number" class="puzzle-number">חידה #1</span>
      </div>
      <h2 id="question-text" class="question-text"></h2>
      <div id="answers-container" class="answers-container"></div>
      <div id="feedback-msg" class="feedback-msg hidden"></div>
    </div>

    <!-- Skip button floats freely -->
    <button id="skip-btn" class="btn btn-skip" onclick="handleSkip()">
      דלגו <span id="skip-count">(4 לחיצות נשארו)</span>
    </button>


  </div>

  <!-- Code Modal (accessible from anywhere) -->
  <div id="code-screen" class="screen code-modal-overlay">
    <div class="card code-card">
      <button class="modal-close" onclick="toggleCodeModal()">✕</button>
      <div class="lock-icon">🔒</div>
      <h1>!קוד סודי</h1>
      <!-- Clue preview added here -->
      <div id="final-clue-preview" class="letters-display"></div>
      <p class="code-prompt">הכניסו את הקוד הסודי כדי לפתוח את ההפתעה הסופית:</p>
      <div class="code-input-wrapper">
        <input type="text" id="code-input" class="code-input" placeholder="...הכניסו קוד" autocomplete="off" />
        <button class="btn btn-code" onclick="checkCode()">🔓</button>
      </div>
      <p id="code-error" class="code-error hidden">!קוד שגוי, נסו שוב</p>
    </div>
  </div>

  <!-- Final Screen -->
  <div id="final-screen" class="screen">
    <div id="confetti-container" class="confetti-container"></div>
    <div class="card final-card">
      <div class="trophy">🏆</div>
      <h1>!כל הכבוד</h1>
      <h2>!סיימת את האתגר בהצלחה</h2>
      <div class="final-message">
        <p class="clue-hint">🍬 <strong>La surprise est sur la plafond</strong> 🍬</p>
      </div>
      <div class="final-decoration">
        <span>🎄</span><span>🎁</span><span>⭐</span><span>🎁</span><span>🎄</span>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>


</html>
